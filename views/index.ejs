<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio - GamerVision</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Iconos -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Roboto', sans-serif; background-color: #121212; color: #e0e0e0; }
        .text-accent { color: #ff6b00; }
        .bg-accent { background-color: #ff6b00; }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1a1a1a; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #ff6b00; }

        .product-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.5); border-color: #ff6b00; }

        .typing-dot { animation: typing 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

        #mobile-menu { transition: transform 0.3s ease-in-out; }
        body.chatbot-mode header, body.chatbot-mode footer, body.chatbot-mode .top-bar, body.chatbot-mode #mobile-chat-btn { display: none !important; }
    </style>
</head>
<body class="flex flex-col min-h-screen relative">

    <!-- Top Bar -->
    <div class="top-bar bg-black text-xs py-2 border-b border-gray-800 hidden md:block">
        <div class="container mx-auto px-4 flex justify-between items-center text-gray-400">
            <span><i data-lucide="check-circle" class="inline w-3 h-3 mr-1 text-[#ff6b00]"></i> Bienvenido de nuevo, Gamer.</span>
            <div class="flex gap-4">
                <span class="hover:text-white cursor-pointer">Mis Pedidos</span>
                <span class="hover:text-white cursor-pointer">Soporte</span>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-[#1a1a1a] sticky top-0 z-50 shadow-lg border-b border-gray-800">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <a href="/home" class="flex items-center gap-2 flex-shrink-0 cursor-pointer">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-black font-bold text-xl">G</div>
                    <div class="flex flex-col">
                        <span class="text-2xl font-black tracking-tighter text-white">GAMER<span class="text-[#ff6b00]">VISI√ìN</span></span>
                    </div>
                </a>

                <div class="flex items-center gap-6">
                    <!-- Link a Tienda -->
                    <a href="/tienda" class="hidden md:flex items-center gap-2 text-sm font-bold text-white hover:text-[#ff6b00] transition bg-[#252525] px-4 py-2 rounded-full border border-gray-700 hover:border-[#ff6b00]">
                        <i data-lucide="store" class="w-4 h-4"></i> IR A TIENDA
                    </a>
                    
                    <!-- Link Cerrar Sesi√≥n -->
                    <a href="/auth/logout" class="text-gray-300 hover:text-red-500 transition flex flex-col items-center group" title="Cerrar Sesi√≥n">
                        <i data-lucide="log-out" class="w-6 h-6"></i>
                    </a>

                    <button id="mobile-menu-btn" class="md:hidden text-white hover:text-[#ff6b00] transition">
                        <i data-lucide="menu" class="w-8 h-8"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Men√∫ M√≥vil -->
    <div id="mobile-menu" class="fixed inset-y-0 right-0 w-64 bg-[#1a1a1a] z-50 transform translate-x-full shadow-2xl border-l border-gray-800 flex flex-col">
        <div class="p-5 flex justify-between items-center border-b border-gray-800">
            <span class="text-lg font-bold text-white">Men√∫</span>
            <button id="close-menu-btn" class="text-gray-400 hover:text-white"><i data-lucide="x" class="w-6 h-6"></i></button>
        </div>
        <div class="p-5 flex-1 overflow-y-auto">
            <ul class="space-y-6 text-lg font-medium text-gray-300">
                <li><a href="/home" class="flex items-center gap-3 text-[#ff6b00]"><i data-lucide="home" class="w-5 h-5"></i> Inicio</a></li>
                <li><a href="/tienda" class="flex items-center gap-3 hover:text-white transition"><i data-lucide="shopping-bag" class="w-5 h-5"></i> Tienda</a></li>
                <li class="border-t border-gray-800 pt-6 mt-6">
                    <a href="/auth/logout" class="flex items-center gap-3 text-red-500 hover:text-red-400 transition"><i data-lucide="log-out" class="w-5 h-5"></i> Cerrar Sesi√≥n</a>
                </li>
            </ul>
        </div>
    </div>
    <div id="menu-overlay" class="fixed inset-0 bg-black/50 z-40 hidden backdrop-blur-sm"></div>

    <!-- SECCI√ìN HERO -->
    <section class="relative bg-[#1a1a1a] h-[450px] w-full overflow-hidden">
        <img src="https://placehold.co/1920x600/1a1a1a/333333?text=Banner+Gamer+Setup" class="absolute inset-0 w-full h-full object-cover opacity-50">
        <div class="absolute inset-0 bg-gradient-to-r from-black/90 to-transparent flex items-center">
            <div class="container mx-auto px-4">
                <div class="max-w-2xl animate-fade-in-up">
                    <span class="bg-[#ff6b00] text-white text-xs font-bold px-2 py-1 rounded mb-4 inline-block tracking-widest">NUEVA COLECCI√ìN</span>
                    <h1 class="text-4xl md:text-6xl font-black text-white mb-6 leading-tight">
                        TU MUNDO GAMER <br>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-[#ff6b00] to-yellow-500">EMPIEZA AQU√ç</span>
                    </h1>
                    <p class="text-gray-300 text-lg mb-8 leading-relaxed max-w-lg">
                        Encuentra los componentes m√°s potentes y las laptops de √∫ltima generaci√≥n. Todo lo que necesitas para ganar.
                    </p>
                    <div class="flex gap-4">
                        <a href="/tienda" class="bg-[#ff6b00] hover:bg-[#e65100] text-white font-bold py-3 px-8 rounded transition transform hover:scale-105 shadow-lg shadow-orange-900/20">
                            Ir a la Tienda
                        </a>
                        <button onclick="toggleChat()" class="border border-gray-500 hover:border-white hover:bg-white hover:text-black text-white font-bold py-3 px-8 rounded transition">
                            Consultar IA
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECCI√ìN SERVICIOS -->
    <section class="bg-[#151515] border-b border-gray-800 py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                <div class="flex items-center gap-3"><i data-lucide="shield-check" class="w-8 h-8 text-[#ff6b00]"></i><div><h4 class="text-white font-bold text-sm">Garant√≠a Real</h4><p class="text-xs text-gray-500">Soporte local</p></div></div>
                <div class="flex items-center gap-3"><i data-lucide="truck" class="w-8 h-8 text-[#ff6b00]"></i><div><h4 class="text-white font-bold text-sm">Env√≠os R√°pidos</h4><p class="text-xs text-gray-500">Todo el pa√≠s</p></div></div>
                <div class="flex items-center gap-3"><i data-lucide="credit-card" class="w-8 h-8 text-[#ff6b00]"></i><div><h4 class="text-white font-bold text-sm">Pagos Seguros</h4><p class="text-xs text-gray-500">M√∫ltiples m√©todos</p></div></div>
                <div class="flex items-center gap-3"><i data-lucide="headphones" class="w-8 h-8 text-[#ff6b00]"></i><div><h4 class="text-white font-bold text-sm">Soporte 24/7</h4><p class="text-xs text-gray-500">Atenci√≥n experta</p></div></div>
            </div>
        </div>
    </section>

    <!-- CATEGOR√çAS -->
    <section class="py-12 bg-[#121212]">
        <div class="container mx-auto px-4">
            <h2 class="text-2xl font-bold mb-6 text-white border-l-4 border-[#ff6b00] pl-4">Explora por Categor√≠a</h2>
            <div class="grid grid-cols-2 md:grid-cols-6 gap-4">
                <a href="/tienda" class="bg-[#1a1a1a] p-6 rounded-lg border border-gray-800 hover:border-[#ff6b00] transition flex flex-col items-center gap-3 group"><i data-lucide="monitor" class="w-8 h-8 text-gray-400 group-hover:text-white transition"></i><span class="text-sm text-gray-300">Monitores</span></a>
                <a href="/tienda" class="bg-[#1a1a1a] p-6 rounded-lg border border-gray-800 hover:border-[#ff6b00] transition flex flex-col items-center gap-3 group"><i data-lucide="cpu" class="w-8 h-8 text-gray-400 group-hover:text-white transition"></i><span class="text-sm text-gray-300">Procesadores</span></a>
                <a href="/tienda" class="bg-[#1a1a1a] p-6 rounded-lg border border-gray-800 hover:border-[#ff6b00] transition flex flex-col items-center gap-3 group"><i data-lucide="laptop" class="w-8 h-8 text-gray-400 group-hover:text-white transition"></i><span class="text-sm text-gray-300">Laptops</span></a>
                <a href="/tienda" class="bg-[#1a1a1a] p-6 rounded-lg border border-gray-800 hover:border-[#ff6b00] transition flex flex-col items-center gap-3 group"><i data-lucide="hard-drive" class="w-8 h-8 text-gray-400 group-hover:text-white transition"></i><span class="text-sm text-gray-300">Tarjetas</span></a>
                <a href="/tienda" class="bg-[#1a1a1a] p-6 rounded-lg border border-gray-800 hover:border-[#ff6b00] transition flex flex-col items-center gap-3 group"><i data-lucide="headphones" class="w-8 h-8 text-gray-400 group-hover:text-white transition"></i><span class="text-sm text-gray-300">Audio</span></a>
                <a href="/tienda" class="bg-[#1a1a1a] p-6 rounded-lg border border-gray-800 hover:border-[#ff6b00] transition flex flex-col items-center gap-3 group"><i data-lucide="mouse" class="w-8 h-8 text-gray-400 group-hover:text-white transition"></i><span class="text-sm text-gray-300">Perif√©ricos</span></a>
            </div>
        </div>
    </section>

    <!-- OFERTAS FLASH -->
    <section class="py-12 bg-gradient-to-r from-[#1a1a1a] to-[#0f0f0f] border-y border-gray-800">
        <div class="container mx-auto px-4 flex flex-col md:flex-row items-center justify-between gap-8">
            <div class="md:w-1/2">
                <span class="text-[#ff6b00] font-bold tracking-widest text-sm uppercase mb-2 block">Oportunidad √önica</span>
                <h2 class="text-4xl font-black text-white mb-4">OFERTAS FLASH</h2>
                <p class="text-gray-400 mb-6">Descuentos exclusivos por tiempo limitado en equipos seleccionados.</p>
                <div class="flex gap-4 mb-6">
                    <div class="bg-[#252525] p-3 rounded text-center border border-gray-700 min-w-[70px]"><span class="block text-2xl font-bold text-white">08</span><span class="text-xs text-gray-500">Horas</span></div>
                    <div class="bg-[#252525] p-3 rounded text-center border border-gray-700 min-w-[70px]"><span class="block text-2xl font-bold text-white">45</span><span class="text-xs text-gray-500">Min</span></div>
                    <div class="bg-[#252525] p-3 rounded text-center border border-gray-700 min-w-[70px]"><span class="block text-2xl font-bold text-white">12</span><span class="text-xs text-gray-500">Seg</span></div>
                </div>
                <a href="/tienda" class="bg-white text-black hover:bg-gray-200 font-bold py-3 px-6 rounded transition inline-block">Ver Ofertas</a>
            </div>
            <div class="md:w-1/2 flex justify-center relative">
                <div class="absolute inset-0 bg-[#ff6b00] blur-[100px] opacity-20 rounded-full"></div>
                <img src="https://placehold.co/500x300/1a1a1a/fff?text=Combo+Gamer" class="relative z-10 rounded-lg shadow-2xl border border-gray-700 transform hover:scale-105 transition duration-500">
            </div>
        </div>
    </section>

    <!-- PRODUCTOS DESTACADOS (Est√°ticos visuales) -->
    <section class="py-16 bg-[#0f0f0f]">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-end mb-8">
                <h2 class="text-3xl font-black text-white">Lo M√°s Nuevo</h2>
                <a href="/tienda" class="text-[#ff6b00] hover:text-white transition text-sm font-bold">Ver Todo ‚Üí</a>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Tarjetas est√°ticas de ejemplo para que se vea lleno el inicio -->
                <div class="product-card bg-[#1a1a1a] rounded-xl overflow-hidden border border-gray-800 relative group flex flex-col">
                    <div class="h-48 bg-white p-4 flex items-center justify-center"><img src="https://placehold.co/300x300/white/black?text=Laptop" class="object-contain h-full"></div>
                    <div class="p-5 flex-1 flex flex-col">
                        <h3 class="font-bold text-white text-sm mb-2">MSI KATANA 15</h3>
                        <div class="mt-auto flex justify-between items-center pt-3 border-t border-gray-700">
                            <span class="text-lg font-black text-white">$1,499</span>
                        </div>
                    </div>
                </div>
                <div class="product-card bg-[#1a1a1a] rounded-xl overflow-hidden border border-gray-800 relative group flex flex-col">
                    <div class="h-48 bg-white p-4 flex items-center justify-center"><img src="https://placehold.co/300x300/white/black?text=GPU" class="object-contain h-full"></div>
                    <div class="p-5 flex-1 flex flex-col">
                        <h3 class="font-bold text-white text-sm mb-2">RTX 4070 ASUS</h3>
                        <div class="mt-auto flex justify-between items-center pt-3 border-t border-gray-700">
                            <span class="text-lg font-black text-white">$699</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- MARCAS -->
    <section class="py-10 bg-black border-y border-gray-800">
        <div class="container mx-auto px-4">
            <div class="flex flex-wrap justify-center items-center gap-8 md:gap-16 opacity-50 grayscale hover:grayscale-0 transition duration-500">
                <span class="text-2xl font-black text-white cursor-default">ASUS</span>
                <span class="text-2xl font-black text-white cursor-default">MSI</span>
                <span class="text-2xl font-black text-white cursor-default">NVIDIA</span>
                <span class="text-2xl font-black text-white cursor-default">AMD</span>
            </div>
        </div>
    </section>

    <!-- CHATBOT MODAL -->
    <div id="chatbot-modal" class="fixed inset-0 bg-[#0a0a0a] z-50 hidden flex-col transition-opacity duration-300">
        <div class="bg-[#1a1a1a] border-b border-gray-800 p-4 shadow-md flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-[#ff6b00] rounded-full flex items-center justify-center shadow-lg"><i data-lucide="bot" class="w-6 h-6 text-white"></i></div>
                <div><h1 class="text-lg font-black text-white">GamerVision <span class="text-[#ff6b00]">AI</span></h1><p class="text-xs text-gray-400 flex items-center gap-1"><span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span> En l√≠nea</p></div>
            </div>
            <button onclick="toggleChat()" class="text-gray-400 hover:text-white border border-gray-700 px-3 py-1.5 rounded flex items-center gap-2"><i data-lucide="x" class="w-4 h-4"></i> Cerrar</button>
        </div>
        <div class="flex-1 container mx-auto p-4 max-w-4xl flex flex-col">
            <div class="flex-1 bg-[#121212] rounded-lg border border-gray-800 p-6 overflow-y-auto space-y-6 shadow-inner" id="chat-box">
                <div class="flex gap-4">
                    <div class="w-8 h-8 bg-[#1a1a1a] border border-[#ff6b00] rounded-full flex items-center justify-center flex-shrink-0"><i data-lucide="bot" class="w-4 h-4 text-[#ff6b00]"></i></div>
                    <div class="bg-[#1a1a1a] border border-gray-800 p-4 rounded-r-xl rounded-bl-xl text-gray-300 max-w-lg shadow-lg">
                        <p class="mb-2 font-bold text-white">¬°Hola, Gamer! üéÆ</p>
                        <p>Soy tu asistente virtual. ¬øEn qu√© te puedo ayudar hoy?</p>
                    </div>
                </div>
            </div>
            <div class="mt-4 relative">
                <input type="text" id="user-input" placeholder="Escribe tu mensaje..." class="w-full bg-[#1a1a1a] border border-gray-700 text-white rounded-full pl-6 pr-14 py-4 focus:outline-none focus:border-[#ff6b00]" onkeypress="handleEnter(event)">
                <button onclick="sendMessage()" class="absolute right-3 top-3 bg-[#ff6b00] hover:bg-[#e65100] text-white p-2 rounded-full"><i data-lucide="send" class="w-5 h-5"></i></button>
            </div>
        </div>
    </div>

    <!-- BOT√ìN CHAT -->
    <button id="mobile-chat-btn" onclick="toggleChat()" class="fixed bottom-6 left-6 z-40 bg-[#ff6b00] hover:bg-[#e65100] text-white p-4 rounded-full shadow-[0_0_15px_rgba(255,107,0,0.5)] transition transform hover:scale-110 flex items-center justify-center group">
        <i data-lucide="message-square" class="w-7 h-7"></i>
        <span class="absolute left-full ml-3 bg-[#1a1a1a] text-white text-xs px-2 py-1 rounded border border-[#ff6b00] opacity-0 group-hover:opacity-100 transition whitespace-nowrap pointer-events-none">Chat IA</span>
    </button>

    <footer class="bg-[#0a0a0a] border-t border-gray-800 py-8 mt-auto"><div class="container mx-auto px-4 text-center"><p class="text-xs text-gray-600">¬© 2024 GamerVision.</p></div></footer>

    <script>
        lucide.createIcons();
        const mobileMenu = document.getElementById('mobile-menu');
        const overlay = document.getElementById('menu-overlay');
        document.getElementById('mobile-menu-btn').addEventListener('click', toggleMenu);
        document.getElementById('close-menu-btn').addEventListener('click', toggleMenu);
        overlay.addEventListener('click', toggleMenu);

        function toggleMenu() {
            const isClosed = mobileMenu.classList.contains('translate-x-full');
            if (isClosed) { mobileMenu.classList.remove('translate-x-full'); overlay.classList.remove('hidden'); }
            else { mobileMenu.classList.add('translate-x-full'); overlay.classList.add('hidden'); }
        }

        function toggleChat() {
            const modal = document.getElementById('chatbot-modal');
            modal.classList.toggle('hidden');
            modal.classList.toggle('flex');
            document.body.classList.toggle('chatbot-mode', !modal.classList.contains('hidden'));
        }

        // --- L√ìGICA CHATBOT REAL ---
        const chatBox = document.getElementById('chat-box');
        const userInput = document.getElementById('user-input');

        function handleEnter(e) { if (e.key === 'Enter') sendMessage(); }

        async function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;
            addMessage(text, 'user');
            userInput.value = '';

            try {
                // LLAMADA REAL A LA API
                const response = await fetch('/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ mensaje: text })
                });
                const data = await response.json();
                if (data.analisis) addMessage(data.analisis, 'bot');
                else addMessage("Error de conexi√≥n.", 'bot');
            } catch (error) {
                addMessage("Error cr√≠tico al contactar IA.", 'bot');
            }
        }

        function addMessage(text, type) {
            const div = document.createElement('div');
            if (type === 'user') {
                div.className = "flex gap-4 justify-end";
                div.innerHTML = `<div class="bg-[#ff6b00] p-4 rounded-l-xl rounded-br-xl text-white max-w-lg shadow-lg"><p>${text}</p></div>`;
            } else {
                div.className = "flex gap-4";
                div.innerHTML = `<div class="w-10 h-10 bg-[#1a1a1a] border border-[#ff6b00] rounded-full flex items-center justify-center flex-shrink-0"><i data-lucide="bot" class="w-5 h-5 text-[#ff6b00]"></i></div><div class="bg-[#1a1a1a] border border-gray-800 p-4 rounded-r-xl rounded-bl-xl text-gray-300 max-w-lg shadow-lg"><p>${text}</p></div>`;
            }
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
            lucide.createIcons();
        }
    </script>
</body>
</html>